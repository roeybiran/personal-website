---
import Layout from "./Layout.astro";
import AppNav from "../components/AppNav.astro";
import type { CollectionEntry } from "astro:content";

interface Props {
  entry: CollectionEntry<"apps">;
  pageTitle: string | undefined;
  currentURL: string;
  ogImage?: string;
}

const { entry, pageTitle, ogImage = "og.jpg", currentURL }: Props = Astro.props;

const composedTitle = pageTitle
  ? `${entry.data.name}: ${pageTitle}`
  : entry.data.name;
---

<Layout
  pageTitle={composedTitle}
  pageDescription={entry.data.metaDescription}
  ogImage={`/apps/${entry.id}/${ogImage}`}
  currentURL={currentURL}
>
  <AppNav
    appName={entry.data.name}
    currentURL={currentURL}
    gumroadID={entry.data.gumroadID}
  />
  <slot />
</Layout>
